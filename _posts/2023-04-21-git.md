---
layout: post
title: "How to set up Git on Linux"
author: "wano"
excerpt_separator: <!--more-->
tags: ['dev', 'git', 'linux']
use_math: true
lastmode: 2023-04-20 11:00:00
sitemap:
  changefreq: weekly
  priority: 0.5
---

Git is a version control system for software development.<!--more-->

<p><span style="color: #0000ff;"><strong>1. git 설치 및 계정 생성<span style="color: #ff9900;">&nbsp;(client-&gt;<strong><span style="color: #ff9900;">server</span></strong></span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></p>
<p>ssh root@11.22.33.44<span style="color: #999999;">&nbsp;#ssh로 원격 서버(여기서는 IP주소가 11.22.33.44라고 가정)에 접속<br></span>root@11.22.33.44's password:&nbsp;<span style="color: #999999;">&nbsp;[server의 root 암호&nbsp;입력]</span></p>
<p>yum install git<span style="color: #999999;"> #git 설치</span></p>
<p><span style="color: #000000;">adduser git<span style="color: #999999;">&nbsp;#git 계정 생성 (git이 아닌 다른 이름도 상관없음)</span></span><span style="color: #999999;"><br></span>passwd git&nbsp;<span style="color: #999999;">#git 암호 변경</span><span style="color: #999999;"><br></span>Changing password for user git.<span style="color: #999999;"><br></span>New&nbsp;password:&nbsp;<span style="color: #999999;">&nbsp;[dexter&nbsp;입력] (dexter가 아닌 다른 암호도 상관없음)<span style="color: #999999;"><br></span></span>BAD PASSWORD: The password is shorter than 8 characters<span style="color: #999999;"><br></span>Retype new&nbsp;password:&nbsp;<span style="color: #999999;">&nbsp;[dexter&nbsp;입력] (앞의 암호 다시 입력)<span style="color: #999999;"><br></span></span></p>
<p><span style="color: #000000;">su git<span style="color: #999999;">&nbsp;#생성한 계정(git)으로 전환<br></span></span>cd<span style="color: #999999;">&nbsp;#홈 디렉토리(/home/git)로 이동<span style="color: #000000;"><span style="color: #999999;"><br></span></span></span>ssh-keygen -t rsa<span style="color: #999999;">&nbsp;#rsa 암호화 방식으로 key를 생성</span></p>
<p>Generating public/private rsa key pair.<br>Enter file in which to save the key (/home/git/.ssh/id_rsa):&nbsp;<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력]<br><span style="color: #000000;">Created directory '/home/git/.ssh'<span style="color: #999999;"><br><span style="color: #000000;">Enter passphrase (empty for no passphrase):<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력]<br><span style="color: #000000;">Enter same passphrase again:<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력]</span></span></span></span></span></span></span></p>
<p>ls -al ~/.ssh<span style="color: #999999;">&nbsp;#/home/git/.ssh에 id_rsa, id_rsa.pub 두 개 파일들이 생성되었는지 확인</span><span style="color: #999999;"><span style="color: #999999;"><br></span></span></p>
<p><span style="color: #000000;">exit</span><span style="color: #999999;"> #git 계정에서 탈출<br></span>e<span style="color: #999999;"><span style="color: #000000;">xit</span></span><span style="color: #999999;">&nbsp;#root 계정에서 탈출 (원격 서버 접속 해제)</span></p>
<p><span style="color: #0000ff;"><strong>2. git 설치 및 기본 설정<span style="color: #ff9900;">&nbsp;(<strong><span style="color: #ff9900;">client</span></strong>)</span></strong></span></p>
<p><span style="color: #000000;">su<span style="color: #999999;"> #root 계정으로 변경</span></span><br><span style="color: #000000;">yum install git<span style="color: #999999;"> #git 설치</span></span><br><span style="color: #000000;">exit<span style="color: #999999;"> #root 계정에서 탈출</span></span></p>
<p><span style="color: #000000;">git --version<span style="color: #999999;"> #git 버전 확인</span></span><br><span style="color: #000000;">git config --global user.name "wano"<span style="color: #999999;"> #git에서 사용할 계정 설정 (여기서는 wano)</span></span><br><span style="color: #000000;">git config --global user.email "wano@gmail.com"<span style="color: #999999;"> #이메일 설정 (여기서는wano@gmail.com)</span></span><br><span style="color: #000000;">git config --global color.ui "auto"<span style="color: #999999;"> #색상 설정</span></span><br><span style="color: #000000;">git config --global --list<span style="color: #999999;"> #설정 확인</span></span></p>
<p><span style="color: #0000ff;"><strong><strong>3. SSH Key 생성<span style="color: #ff9900;">&nbsp;(<strong><span style="color: #ff9900;">client</span></strong>)</span></strong></strong></span></p>
<p><span style="line-height: 1.6;">ssh-keygen -t rsa</span><span style="color: #999999;"> #rsa 암호화 방식으로 key를 생성</span></p>
<p>Generating public/private rsa key pair.<br>Enter file in which to save the key (/home/wano/.ssh/id_rsa):&nbsp;<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력]<br><span style="color: #000000;">Created directory '/home/wano/.ssh'<span style="color: #999999;"><br><span style="color: #000000;">Enter passphrase (empty for no passphrase):<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력]<br><span style="color: #000000;">Enter same passphrase again:<span style="color: #999999;">&nbsp;[그냥&nbsp;Enter 입력</span></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;">]</span></span></span></span></span></span></span></p>
<p>ls -al ~/.ssh<span style="color: #999999;">&nbsp;#/home/git/.ssh에 id_rsa, id_rsa.pub 두 개 파일들이 생성되었는지 확인<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;">#id_rsa: private key, id_rsa.pub: public key</span></span></span></span></span></span></span></span></p>
<p><span style="color: #0000ff;"><strong>4. Public&nbsp;Key를 서버에 전송<span style="color: #ff9900;">&nbsp;(client</span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></p>
<p><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;">cd .ssh<span style="color: #999999;">&nbsp;#/home/wano/.ssh 디렉토리로 이동<br></span></span></span></span></span></span></span>scp id_rsa.pub git@11.22.33.44:<span style="color: #999999;">&nbsp;#서버의 git 계정&nbsp;home에 공개키를 복사</span><span style="color: #999999;"><br></span>git@11.22.33.44's password:&nbsp;<span style="color: #999999;">&nbsp;[server의 git&nbsp;암호&nbsp;입력: dexter]</span></p>
<p><span style="color: #0000ff;"><strong>5. 전송받은 Public&nbsp;Key를 등록<span style="color: #ff9900;"> <span style="color: #0000ff;"><strong><span style="color: #ff9900;">(client-&gt;<strong><span style="color: #ff9900;">server</span></strong></span></strong></span></span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></p>
<p>ssh git@11.22.33.44<span style="color: #999999;">&nbsp;#ssh로 원격 서버에 접속<br></span>git@11.22.33.44's password:&nbsp;<span style="color: #999999;">&nbsp;[server의 git&nbsp;암호&nbsp;입력: dexter]</span></p>
<p>cd<span style="color: #999999;">&nbsp;#홈 디렉토리(/home/git)로 이동</span><span style="color: #999999;"><br></span>ls -al:&nbsp;<span style="color: #999999;">&nbsp;#전송된 id_rsa.pub 파일이 있는지<span style="color: #999999;"> 확인</span><br><span style="color: #000000;"><span style="color: #000000;">cat id_rsa.pub &gt;&gt;&nbsp;.ssh/authorized_keys</span><span style="color: #999999;"><span style="color: #999999;">&nbsp;#authorized_keys 파일을 생성하고 내용을&nbsp;<span style="color: #999999;">추가</span><br><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;">rm -f id_rsa.pub</span></span><span style="color: #999999;">&nbsp;#id_rsa.pub 삭제<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">chmod 700 .ssh&nbsp;</span></span><span style="color: #999999;">&nbsp;#.ssh 디렉토리 권한 설정 (매우 중요)</span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">chmod 600 .ssh/authorized_keys</span></span><span style="color: #999999;">&nbsp;#authorized_keys 파일&nbsp;권한 설정 (매우 중요)</span></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span>e<span style="color: #999999;"><span style="color: #000000;">xit</span></span><span style="color: #999999;">&nbsp;#root 계정에서 탈출 (원격 서버 접속 해제)</span></p>
<p><span style="color: #0000ff;"><strong>6. 접속 테스트<span style="color: #ff9900;"> <span style="color: #0000ff;"><strong><span style="color: #0000ff;"><strong><span style="color: #ff9900;"><span style="color: #0000ff;"><strong><span style="color: #ff9900;">(client-&gt;<strong><span style="color: #ff9900;">server</span></strong></span></strong></span></span></strong></span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></span></strong></span></p>
<p>ssh git@11.22.33.44<span style="color: #999999;"> #ssh로 원격 서버에 다시 접속 (암호를 안물어보면 성공!)<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;">#만약 암호를 물어보면 설정에 문제가 있는 것이므로 -v, -vv, -vvv 옵션 등을 추가하여 디버깅해볼것.&nbsp;<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;">또한, ssh-add를 실행한 후 시도해볼것.</span></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">exit</span></span><span style="color: #999999;">&nbsp;#root 계정에서 탈출 (원격 서버 접속 해제)</span></span></span></span></span></span></span></span></span></p>
<p><span style="color: #0000ff;"><strong>7.&nbsp;Git Repository 생성<span style="color: #0000ff;"><strong><span style="color: #ff9900;">&nbsp;<span style="color: #0000ff;"><strong><span style="color: #ff9900;">(<strong><span style="color: #ff9900;"><span style="color: #0000ff;"><strong><span style="color: #0000ff;"><strong><span style="color: #ff9900;"><span style="color: #0000ff;"><strong><span style="color: #ff9900;">client-&gt;<strong><span style="color: #ff9900;">server</span></strong></span></strong></span></span></strong></span></strong></span></span></strong></span></strong></span></span></strong></span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></p>
<p>ssh root@11.22.33.44<span style="color: #999999;"> #ssh로 원격 서버에 접속 (root 계정 사용)<br></span>root@11.22.33.44's password:&nbsp;<span style="color: #999999;">&nbsp;[server의 root 암호&nbsp;입력]</span></p>
<p>mkdir -p /gitRepository/Zelos.git<span style="color: #999999;">&nbsp;#/gitRepository/Project1.git 디렉토리 생성 (다른 이름도 상관없음<span style="color: #999999;">)</span><span style="color: #999999;"><br></span></span>chown&nbsp;git:git /gitRepository<span style="color: #999999;"><span style="color: #999999;">&nbsp;#소유권 변경<br></span></span>chown -R git /gitRepository/Zelos.git<span style="color: #999999;"><span style="color: #999999;">&nbsp;#소유권 변경</span></span></p>
<p>su git<span style="color: #999999;"><span style="color: #999999;"> # git으로 계정 변경<br></span></span>cd /gitRepository/Zelos.git<span style="color: #999999;"><span style="color: #999999;">&nbsp;#/gitRepository/Project1.git 디렉토리로 이동<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">git --bare init</span></span><span style="color: #999999;">&nbsp;#Zelos 프로젝트&nbsp;git repository 초기화<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">Initialized empty Git repository in /gitRepository/Zelos.git<span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br></span></span></span></span></span></span><span style="color: #999999;"><span style="color: #000000;">cd&nbsp;</span></span><span style="color: #999999;">#홈 디렉토리(/home/git)으로 이동</span></span></span><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #999999;"><br><span style="color: #000000;">ln -s /gitRepository/Zelos.git .<span style="color: #999999;">&nbsp;#/home/git/Zelos.git 심볼릭 링크 생성<br><span style="color: #000000;"><span style="color: #999999;"><span style="color: #999999;"><span style="color: #000000;"><span style="color: #000000;"><span style="color: #999999;"><span style="color: #000000;">exit</span></span><span style="color: #999999;"> #git 계정에서 탈출<br></span></span>e<span style="color: #999999;"><span style="color: #000000;">xit</span></span><span style="color: #999999;">&nbsp;#root 계정에서 탈출 (원격 서버 접속 해제)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="color: #0000ff;"><strong>8. 최초의 clone &amp; commit<span style="color: #ff9900;">&nbsp;<span style="color: #0000ff;"><strong><span style="color: #ff9900;">(client</span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></span></strong></span></p>
<p><span style="color: #000000;">cd ~/work<span style="color: #999999;"> #~/work로 이동</span></span><br><span style="color: #000000;">git clone git@11.22.33.44:Zelos.git<span style="color: #999999;"> #~/work/Zelos 생성 (clone)<br><span style="color: #000000;">Cloning into 'Zelos' ...<br><span style="color: #000000;">warning: You appear to have cloned an empty repository.</span></span></span></span><br><span style="color: #000000;">cd Zelos<span style="color: #999999;">&nbsp;#/home/wano/work/Zelos로 이동</span></span><br><span style="color: #000000;">echo "Hello Zelos" &gt; readme.txt<span style="color: #999999;"> #readme.txt 생성</span></span><br><span style="color: #000000;">git add readme.txt<span style="color: #999999;"> #add</span></span><br><span style="color: #000000;">git commit -m 'first commit'<span style="color: #999999;"> #commit</span></span><br><span style="color: #000000;">git push origin master<span style="color: #999999;"> #push</span></span><br><span style="color: #000000;">git status<span style="color: #999999;"> #status 확인</span></span><br><span style="color: #000000;">git log<span style="color: #999999;"> #log 확인</span></span><br><span style="color: #000000;">git pull<span style="color: #999999;"> #최신 내용으로 업데이트</span></span></p>
<p><span style="color: #0000ff;"><strong>9. git 동기화<span style="color: #ff9900;">&nbsp;<span style="color: #0000ff;"><strong><span style="color: #ff9900;">(client</span></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></span></strong></span></p>
<p><span style="color: #000000;">작업 완료 후,<span style="color: #000000;"><span style="color: #999999;"> 이동</span></span><br><span style="color: #000000;">git&nbsp;pull</span><br>git add --all<br><span style="color: #000000;">git commit -m '.'<span style="color: #000000;"><span style="color: #999999;">&nbsp;</span></span><br><span style="color: #000000;">git push</span></span></span></p>
<p><span style="color: #0000ff;"><strong>10.<strong>보안을 위해서 쉘기능 제한 (optional)<span style="color: #0000ff;"><strong><span style="color: #ff9900;"> <span style="color: #0000ff;"><strong><span style="color: #ff9900;">(client-&gt;<strong><span style="color: #ff9900;">server</span></strong></span></strong></span></span></strong></span></strong></strong></span><span style="color: #0000ff;"><strong><span style="color: #ff9900;">)</span></strong></span></p>
<p>ssh root@11.22.33.44<span style="color: #999999;">&nbsp;#ssh로 원격 서버에 접속 (root 계정 사용)</span><span style="color: #999999;"><br></span>root@11.22.33.44's password:&nbsp;<span style="color: #999999;">&nbsp;[server의 root 암호&nbsp;입력]</span></p>
<p>/etc/passwd<span style="color: #999999;">의 내용 중,<br><span style="color: #999999;">git:x:1001:1001::/home/git:</span></span>/bin/bash<span style="color: #999999;"><span style="color: #999999;">의 내용을 다음과 같이 변경해준다.</span><br><span style="color: #999999;">git:x:1001:1001::/home/git:</span></span>/usr/bin/git-shell</p>
<p>e<span style="color: #999999;"><span style="color: #000000;">xit</span></span><span style="color: #999999;">&nbsp;#root 계정에서 탈출 (원격 서버 접속 해제)</span></p>
<p>ssh git@11.22.33.44<span style="color: #999999;">&nbsp;#ssh로 원격 서버에 접속 (git 계정 사용)<span style="color: #999999;"> 같이 변경해준다.</span><br></span><span style="color: #999999;">이제 ssh로 접속을 시도하면 Connection to 11.22.33.44 closed. 에러를 출력하면서 거부된다.</span></p>
