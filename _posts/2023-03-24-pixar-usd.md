---
layout: post
title: "Pixar USD"
author: "wano"
excerpt_separator: <!--more-->
tags: ['dev', 'usd']
use_math: true
lastmode: 2023-03-24 13:00:00
sitemap:
  changefreq: weekly
  priority: 0.5
---

How to install Pixar's USD on Windows<!--more-->

ChatGPT는 USD와 API에 대해서 다음과 같이 설명합니다.

Pixar USD(Universal Scene Description)는 3D 애니메이션 및 VFX(시각 특수 효과) 작업을 위한 개방형 플랫폼입니다. Pixar Animation Studios에서 개발한 이 기술은 여러 프로그램에서 작업을 쉽게 공유하고 관리할 수 있도록 도와줍니다.

Pixar USD는 새로운 방식으로 3D 애니메이션 및 VFX 작업을 구성하고 처리합니다. 이를 위해 일반적으로 다른 프로그램에서 구현되는 여러 기능, 예를 들면 모델링, 애니메이션, 조명, 머티리얼, 렌더링 등의 기능을 하나의 통합 플랫폼으로 제공합니다. 이로 인해 다양한 소프트웨어 간의 작업 흐름이 훨씬 더 원활해집니다.

Pixar USD는 오픈소스이며 무료로 사용할 수 있습니다. 다양한 크기와 유형의 회사에서 사용되며, 많은 애니메이션 및 VFX 작업을 위한 산업 표준으로 자리 잡았습니다.

Pixar USD API는 Pixar USD의 프로그래밍 인터페이스입니다. 이 API를 사용하면 C++과 Python을 포함한 다양한 프로그래밍 언어를 사용하여 Pixar USD를 프로그래밍적으로 조작할 수 있습니다.

Pixar USD API는 크게 두 가지 유형의 클래스로 구성됩니다. 첫째, 스키마(Schema) 클래스는 USD에서 사용되는 모든 데이터 유형을 정의합니다. 둘째, 스테이지(Stage) 클래스는 3D 장면을 나타내는 USD 파일을 로드하고 편집하는 데 사용됩니다.

스키마 클래스는 USD에서 사용되는 모든 데이터 유형을 나타내며, 새로운 데이터 유형을 정의할 수도 있습니다. 예를 들어, "폴리곤 메쉬(Polygon Mesh)"라는 USD 데이터 유형이 있습니다. 이 유형은 포인트, 에지, 면을 사용하여 폴리곤 메쉬의 기하학 정보를 정의합니다.

스테이지 클래스는 USD 파일에서 장면을 로드하고, 수정하고, 저장하는 데 사용됩니다. 스테이지 클래스를 사용하면 장면의 계층 구조를 검색하고, 머티리얼 및 조명 정보를 변경하며, 다양한 파일 형식(예: .usd, .usda, .usdc)으로 장면을 내보낼 수 있습니다.

Pixar USD API는 Pixar Animation Studios에서 개발되었으며, 오픈소스로 제공됩니다. 이 API를 사용하면 재사용 가능한 코드를 작성하고, 다양한 3D 그래픽 응용 프로그램을 개발할 수 있습니다.

---

이 포스트에서는 윈도우즈(Windows) 운영체제에서 USD를 설치하고 개발환경을 구축하는 방법에 대해서 설명합니다.

우선 USD Python 모듈은 pip으로 간단하게 설치할 수 있습니다.

<center><b>pip install usd-core</b></center>

USD는 기본적으로 github를 통해 소스코드의 형태로 배포됩니다. [link](https://github.com/PixarAnimationStudios/USD)

따라서 소스코드를 받아서 빌드해야 사용할 수 있습니다. 일반적인 빌드 방식을 채택하고 있기 때문에 cmake를 이용해서 프로젝트 파일을 만들고 컴파일을 하여 빌드를 할 수 있습니다. 하지만 복잡한 의존성(dependency)이 문제입니다. USD는 3차원 데이터를 다루는 최상위 라이브러리이기 때문에 다른 여러 라이브러리들(TBB, OpenEXR, OpenSubdiv, GLFW, Ptex, OIIO, Boost, QT, Double Conversion, Jemalloc, Jinja2 등)이 사전에 설치되어 있어야 합니다. 의존성을 가진 모든 라이브러리들을 문제 없이 빌드하여 설치하는 것은 생각보다 쉽지 않습니다.

그런데 다행스럽게도 nVIDIA에서 이미 바이너리로 빌드된 형태의 USD를 배포하고 있습니다. 이것을 받아서 사용하면 됩니다. [link](https://developer.nvidia.com/usd)

<center><img src="https://cgvfxmath.github.io/assets/img/nvidia_usd.png" width="70%"></center>

해당 파일을 받으면 .zip 파일 형태로 묶여 있는데 적당한 위치에 압축을 풀면 됩니다. 저는 “C:\Program Files\Pixar\USD” 위치에 압축을 풀었습니다.

<center><img src="https://cgvfxmath.github.io/assets/img/pixar_usd_location.png" width="70%"></center>

